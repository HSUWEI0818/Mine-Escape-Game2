<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>踩地雷 - 三關挑戰 (External JS)</title>
<style>
  :root{--bg:#0f172a;--card:#0b1220;--muted:#94a3b8;--accent:#10b981;}
  html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;}
  body{background:linear-gradient(180deg,#071124 0%, #071730 100%);color:#e6eef8;display:flex;align-items:center;justify-content:center;padding:24px;}
  .app{width:100%;max-width:820px;background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));border-radius:12px;padding:20px;box-shadow:0 10px 30px rgba(2,6,23,0.6);border:1px solid rgba(255,255,255,0.03)}
  h1{margin:0;font-size:20px}
  .top{display:flex;gap:12px;align-items:center;justify-content:space-between;margin-bottom:12px}
  .meta{display:flex;gap:8px;align-items:center}
  .pill{background:rgba(255,255,255,0.03);padding:6px 10px;border-radius:8px;font-size:14px;color:var(--muted)}
  .board-wrap{display:flex;gap:20px;align-items:flex-start;flex-wrap:wrap}
  .board{background:var(--card);padding:14px;border-radius:10px;min-width:220px;flex:1}
  .grid{display:grid;gap:6px;margin-top:10px}
  .cell{width:44px;height:44px;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,#0f172a,#081024);border-radius:6px;border:1px solid rgba(255,255,255,0.03);cursor:pointer;user-select:none;font-weight:600}
  .cell.revealed{background:linear-gradient(180deg,#08323a,#052029);cursor:default}
  .cell.bomb.revealed{background:linear-gradient(180deg,#53151a,#3b0f12);color:#fff}
  .cell.safe{color:var(--accent)}
  .controls{display:flex;gap:8px;align-items:center}
  button{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 10px;border-radius:8px;color:inherit;cursor:pointer}
  .small{font-size:13px;color:var(--muted)}
  .message{margin-top:12px;padding:10px;border-radius:8px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);border:1px solid rgba(255,255,255,0.02)}
  .footer{margin-top:12px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:8px}
  a.link{color:#93c5fd;text-decoration:none;font-size:13px}
  @media (max-width:520px){
    .cell{width:40px;height:40px}
  }
</style>
</head>
<body>
<div class="app" role="application">
  <div class="top">
    <div>
      <h1>踩地雷 — 三關挑戰</h1>
      <div class="small">規則：每關為 n×n 格子，且有 n 顆地雷。第一關 n=5，每關 n 減 1。每關請按下 <strong>3</strong> 個安全格子即可過關。踩到地雷即失敗。</div>
    </div>
    <div class="meta">
      <div class="pill" id="levelPill">關卡: 1 / 3</div>
      <div class="pill" id="nPill">n = 5</div>
      <div class="pill" id="remainPill">剩餘安全按壓: 3</div>
    </div>
  </div>

  <div class="board-wrap">
    <div class="board" style="min-width:300px;">
      <div><strong id="status">準備中…</strong></div>
      <div class="grid" id="grid" role="grid" aria-label="game-grid"></div>
      <div class="message" id="message">點擊格子開始本關遊戲。按一次格子會揭示：如果是地雷則失敗，若不是則計為一次成功按壓。每關需成功按壓 <strong>3</strong> 次才能進入下一關。</div>
      <div class="footer">
        <div class="controls">
          <button id="restartBtn">重新開始</button>
          <button id="hintBtn">重置本關 (只重置格子)</button>
        </div>
        <div class="small">作者：ChatGPT • 可部署於 Cloudflare Pages（放入 index.html 與 game.js 即可）</div>
      </div>
    </div>

    <div style="width:260px;">
      <div class="board">
        <div><strong>遊戲說明</strong></div>
        <ol class="small" style="padding-left:18px">
          <li>關卡1：5×5，5 顆地雷；關卡2：4×4，4 顆地雷；關卡3：3×3，3 顆地雷。</li>
          <li>每關需按 3 格安全格（不含地雷）以過關。</li>
          <li>踩到地雷：立即失敗，可按「重新開始」。</li>
          <li>每關按下「重置本關」會重新隨機配置地雷（保留當前關卡與進度）。</li>
        </ol>
        <hr/>
        <div><strong>記錄</strong></div>
        <div class="small" id="log">尚未開始</div>
      </div>

      <div style="height:12px"></div>

      <div class="board">
        <div><strong>部署到 Cloudflare Pages</strong></div>
        <ol class="small" style="padding-left:18px">
          <li>在 GitHub 建一個 repository，將本檔 index.html 與 game.js 放到 repo 根目錄並 push。</li>
          <li>到 Cloudflare Pages → Create a project → 連結 GitHub repo → Build settings 選用「None」或直接使用「Production branch: main」與「Build command: (leave)」—因為是靜態單檔。</li>
          <li>完成後就會有一個 <em>pages.dev</em> 子網域可以分享。</li>
        </ol>
        <div class="small" style="margin-top:6px">或直接在本機打開此檔即可遊玩。</div>
      </div>
    </div>
  </div>
</div>

<script src="game.js"></script>
</body>
</html>
